<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <canvas id="myCanvas" width="800" height="600"></canvas>
    <script>
        const canvas = document.getElementById("myCanvas");
		const ctx = canvas.getContext("2d"); 
        
        var rectangleH = 10;
        var rectangleW = 75;
        var xWay = (canvas.width / 2 - rectangleW);
        var yWay = (canvas.height - rectangleH);
        var bulletArray=[];
            targets = [];
        drawRectangle();
        window.addEventListener("keydown", draw, false);
        setInterval(flyingBullet,10);
        setInterval(targets,100);

        function drawRectangle()
        {
            ctx.fillStyle = "red";
            ctx.fillRect(xWay, yWay, rectangleW, rectangleH);
        }
        function draw(e)
        {
            ctx.clearRect(xWay, yWay, rectangleW, rectangleH);
            switch(e.keyCode)
            {
                case 32:
                    shoot();
                    break;
                case 37:
                    if (xWay >= 5)
                    {
                        xWay -=5;
                    }
                    else
                    {
                        drawRectangle();
                    }
                    break;
                case 39:
                    if (xWay <= canvas.width - rectangleW - 5)
                    {
                        xWay +=5;
                    }
                    else
                    {
                        drawRectangle();
                    }
                    break;
            }
            drawRectangle();
        }
        function shoot()
        {
            var rad = 10;
            var xBall = xWay + rectangleW/2;
            var yBall = yWay - rectangleH - 10;
            var bullet = new Bullet(xBall,yBall,rad, red);
            bullet.create();
            bulletArray.push(bullet);
        }
        function flyingBullet(bullet)
        {
            for (var i=0; i<bulletArray.length;i++)
            {
                if (bulletArray[i].yBall ==0)
                {
                    bulletArray[i].delete()
                }
                else
                {
                    if(hitCheck(bulletArray[i]))
                    {
                        bulletArray[i]. delete()
                    }
                    else
                    {
                        bulletArray[i].update();
                        bulletArray[i].draw();
                    }
                }
            }
        }

        function bullet(x,y,rad,color)
        {
            this.xBall =xBall;
            this.yBall =yBall;
            this.rad = rad;
            this.color = color;
        }
        bullet.prototype={
            create: function()
            {
                ctx.clearRect(this.xBall - 10, this.yBall, 21 ,21);
                ctx.beginPath();
                ctx.arc(this.xBall, this.yBall, this.rad, 0, Math.PI *2);
                ctx.fillStyle = this.color;
                ctx.fill();
                ctx.closePath();
            },
            delete: function(){
                ctx.clearRect(this.xBall - this.rad, this.yBall - this.rad, this.rad*2+1,this.rad*2+1);
            },
            update: function(){
                this.yBall -=10;
            }
        }
        function targets()
        {

        }
        //function hitCheck(bullet)
        //{
        //    for(var i=0; i<bulletPosition.length)
        //}
</script>
</body>
</html>